\documentclass{article}

\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{hyperref}
\usepackage[hmargin=3cm]{geometry}
\usepackage{pdflscape}
\usepackage{longtable}
\usepackage{enumitem}
\usepackage{lscape}


\hypersetup{
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=red,          % color of internal links (change box color with linkbordercolor)
    citecolor=green,        % color of links to bibliography
    filecolor=magenta,      % color of file links
    urlcolor=cyan           % color of external links
}

\title{Hazard Analysis\\\progname}

\author{\authname}

\date{}

\input{../Comments}
\input{../Common}

\begin{document}

\maketitle
\thispagestyle{empty}

~\newpage

\pagenumbering{roman}

\begin{table}[hp]
\caption{Revision History} \label{TblRevisionHistory}
\begin{tabularx}{\textwidth}{llX}
\toprule
\textbf{Date} & \textbf{Developer(s)} & \textbf{Change}\\
\midrule
10/23/2024 & Angela & Initial draft\\
10/25/2024 & Jason & Table for section 5 \\
... & ... & ... \\
\bottomrule
\end{tabularx}
\end{table}

~\newpage

\tableofcontents

~\newpage

\pagenumbering{arabic}

\section{Introduction}

A hazard in the context of this document is any property or condition that may
lead to harm or damage to the Plutos system or its users. Potential losses due
to these hazards may include loss of application functionality, performance, or
accuracy, or breaches of user privacy or data. The following sections will
identify hazards within the system and discuss the controls in place for their
mitigation.


\section{Scope and Purpose of Hazard Analysis}

This document aims to provide a comprehensive hazard analysis of the Plutos
system. It identifies hazards within the system, outlines measures to mitigate
them, and specifies the safety and security requirements derived from this
analysis. The analysis will follow the Failure Mode and Effect Analysis (FMEA)
approach. The analysis aims to discover the potential failure modes within the
system and develop a mitigation plan to reduce the risk of failure. 


\section{System Boundaries and Components}

The system will be divided into the following components:
\begin{enumerate}
    \item The Plutos application, which consists of:
    \begin{enumerate}
        \item \textbf{The database}: The database is where the user’s receipts
        and profile data will be stored.
        \item \textbf{The backend server}: The backend server is responsible for
        handling and serving requests from the client. It will interact with all
        the other components listed here.
        \item \textbf{The frontend/user interface}: The frontend/user interface
        is responsible for displaying the appropriate views to the user and
        handling user interactions.
        \item \textbf{The machine learning (ML) model}: The ML model is
        responsible for parsing and categorizing items from a picture of an
        itemized receipt.
    \end{enumerate}
    \item The user’s mobile device and camera setup
\end{enumerate}


\section{Critical Assumptions}

The project will be making the following critical assumptions: 
\begin{enumerate}
    \item The users will be
    using a mobile device running an up-to-date version of iOS or Android.
    \item Users are
    not expected to repeatedly input invalid images into the system (i.e., images
    that do not contain a receipt). While it is anticipated that users may
    occasionally submit an invalid image, it is assumed to not be a significant
    concern.
\end{enumerate}  


\newgeometry{bottom=25mm,hmargin=1.5cm,vmargin=0.5cm, landscape}
\begin{landscape}

\section{Failure Mode and Effect Analysis}

\begin{longtable}{|p{3cm}|p{4cm}|p{5cm}|p{5cm}|p{5cm}|p{1cm}|p{0.75cm}|}
    \caption{Failure Mode and Effect Analysis Table} \label{tab:long} \\
    
    \hline
    \multicolumn{1}{|c|}{\textbf{Design Function}} & 
    \multicolumn{1}{c|}{\textbf{Failure Modes}} & 
    \multicolumn{1}{c|}{\textbf{Effects of Failure}} & 
    \multicolumn{1}{c|}{\textbf{Causes of Failure}} & 
    \multicolumn{1}{c|}{\textbf{Recommended Action}} & 
    \multicolumn{1}{c|}{\textbf{SR}} & 
    \multicolumn{1}{c|}{\textbf{Ref}} \\
    \hline
    \endfirsthead
    
    \hline
    \multicolumn{7}{|c|}{\textit{Continued from previous page}} \\
    \hline
    \multicolumn{1}{|c|}{\textbf{Design Function}} & 
    \multicolumn{1}{c|}{\textbf{Failure Modes}} & 
    \multicolumn{1}{c|}{\textbf{Effects of Failure}} & 
    \multicolumn{1}{c|}{\textbf{Causes of Failure}} & 
    \multicolumn{1}{c|}{\textbf{Recommended Action}} & 
    \multicolumn{1}{c|}{\textbf{SR}} & 
    \multicolumn{1}{c|}{\textbf{Ref}} \\
    \hline
    \endhead
    
    \hline
    \endfoot
    
    Authenticate user & 
    Non-human accounts exist on the server & 
    Increased traffic to the server, invalid inputs, performance deterioration & 
    A bot account logs into the application & 
    Ensure account creation includes a captcha & 
    FR3 & 
    H1-1 \\
    \hline
    % row 2
    Accept image & 
    Camera does not open &
    The user cannot input an image to be processed by the system. &
    \begin{itemize}[leftmargin=0.5cm]
        \item Application does not have access to user's camera
        \item The application is bugged out
    \end{itemize} &
    \begin{itemize}[leftmargin=0.5cm]
        \item Prompt the user to allow camera access for the application
        \item The user should restart the application. 
    \end{itemize} &
    FR7 &
    H2-1\\
    \cline{2-7}
    % row 3
     & 
    Photo library doesn't open &
    Same as H2-1 &
    Same as H2-1 &
    Same as H2-1 &
    FR8 &
    H2-2\\
    \hline
    Process receipt image &
    Image is not processable &
    Poor input into machine learning model; may cause incorrect results or cause model to run for a long time &
    \begin{itemize}[leftmargin=0.5cm]
        \item Poor quality receipt (e.g., paper is crumpled or wrinkled, light ink) 
        \item Poor photo quality (e.g., blurry, part of receipt cut out from frame, low lighting)
        \item The image does not contain a receipt
    \end{itemize} &
    \begin{itemize}[leftmargin=0.5cm]
        \item Prompt the user to retry due to poor photo quality and make sure that the input is actually a receipt
        \item Same as H3-1a
        \item Run image validation before passing the image through the ML model (e.g., check that there is a paper with text in the image)
    \end{itemize} &
    FR16 &
    H3-1\\ 
    \cline{2-7}
    &
    Optical character recognition (OCR) failing or incorrectly parsing text &
    Incorrectly parsed text, missing items, incorrect categorization or costs &
    \begin{itemize}[leftmargin=0.5cm]
        \item Receipt uses different font sizes or styles
        \item Receipt quality causes some letters to be difficult to recognize (e.g., 0 and O, T and I)
    \end{itemize} &
    \begin{itemize}[leftmargin=0.5cm]
        \item Inform user that the OCR isn’t working after 3 failed attempts and ask user to manually input receipt expenses
    \end{itemize} &
    FR16, NFR4 &
    H3-2\\
    \cline{2-7}
    &
    Incorrect item categorization &
    Items are miscategorized, resulting in incorrect insights &
    \begin{itemize}[leftmargin=0.5cm]
        \item OCR incorrectly parses text or fails to read some text
        \item Ambiguous item name
        \item Item has not been identified in the past
    \end{itemize} &
    \begin{itemize}[leftmargin=0.5cm]
        \item Refer to H3-2.
        \item Prompt the user to confirm the category of this object and give it an alias for helping in future recognition.
        \item See H3-3b
    \end{itemize} &
    FR17, NFR2 &
    H3-3\\
    \cline{2-7}
    & 
    Processing image takes more than X seconds to complete &
    \begin{itemize}[leftmargin=0.5cm]
        \item Lower user satisfaction
    \end{itemize} &
    \begin{itemize}[leftmargin=0.5cm]
        \item User’s device is low on memory or has other tasks running in the background
        \item Large image size/high image resolution
        \item OCR model not optimized (especially for that specific use case)
        \item Poor pre-processing  
    \end{itemize} &
    \begin{itemize}[leftmargin=0.5cm]
        \item Inform the user that the task is taking longer than expected and show troubleshooting tips.
        \item See H3-2
    \end{itemize} &
    NFR8, NFR16 &
    H3-4\\
    \hline
    Save new receipt input (image details and model results) &
    Cannot connect to database &
    Receipt input cannot be saved after being processed. &
    \begin{itemize}[leftmargin=0.5cm]
        \item Poor network connection
        \item Database server downtime
    \end{itemize} &
    \begin{itemize}[leftmargin=0.5cm]
        \item Prompt the user to check their network connection
        \item Inform the user of the server error; system will try again at a later time (data will be stored locally and then backup up)
    \end{itemize} &
    FR15 &
    H4-1 \\
    \hline
    The system suggests user budget and goals &
    The system suggests a budget that is lower than the user's total monthly expenses (i.e. unattainable budget) &
    \begin{itemize}[leftmargin=0.5cm]
        \item Lower user satisfaction
        \item User is unable to budget correspondingly to the suggested system budget 
    \end{itemize} &
    \begin{itemize}[leftmargin=0.5cm]
        \item Algorithm to calculate the budget fails 
    \end{itemize} &
    \begin{itemize}[leftmargin=0.5cm]
        \item Provide an option to the user to recalculate monthly budget with a given minimum monthly expense (user enters minimum monthly expense and system recalculates budget) 
    \end{itemize} &
    NFR5 &
    H5-1\\
\end{longtable}
    \newpage{}
\end{landscape}
\restoregeometry

\section{Safety and Security Requirements}

\wss{Newly discovered requirements.  These should also be added to the SRS.  (A
rationale design process how and why to fake it.)}

\section{Roadmap}

\wss{Which safety requirements will be implemented as part of the capstone timeline?
Which requirements will be implemented in the future?}

\newpage{}

\section*{Appendix --- Reflection}

\input{../Reflection.tex}

\begin{enumerate}

\item What went well while writing this deliverable?

The overall process while writing this deliverable was smooth and efficient as we were quickly able to identify the potential hazards related to our project. We brainstormed several ambiguous sections or things we thought were a bit unclear within this analysis document, and were able to get very clear answers from our helpful TA. The team worked well together as we all put in our best efforts and supported one another when completing this task. 

Using the FMEA (Failure Mode and Effect Analysis) approach helped streamline the hazard identification process. Breaking down the system into components allowed for a clear understanding of where risks might occur. Writing the deliverable helped the team clarify and solidify their understanding of how the receipt scanner, the AI model, and other system components interact, making it easier to identify hazards.

\item What pain points did you experience during this deliverable, and how did you resolve them?

At first, it was challenging to define the potential failure modes, especially for components like the machine learning model. The team resolved this by conducting additional research on common failure points in similar systems and reviewing how AI models typically behave with poor input data. Another challenge was balancing realistic assumptions about user behavior with potential risks. For example, while assuming users won’t repeatedly input invalid images, we acknowledged this could still happen. We resolved this by planning mitigation strategies for those edge cases.

\item Which of your listed risks had your team thought of before this deliverable, and which did you think of while doing this deliverable? For the latter ones (ones you thought of while doing the Hazard Analysis), how did they come about?

We had already considered risks related to image quality (e.g., blurry or incomplete receipt images) and network connectivity issues (e.g., users not being able to connect to the database).

While working on the hazard analysis, we realized potential risks like Optical Character Recognition (OCR) misinterpretation due to varied receipt fonts and ML model processing time under different device conditions (e.g., low memory or poor network). These came up while brainstorming as a team and thinking about the specific steps in image processing and how the system handles diverse input.

\item Other than the risk of physical harm, list at least 2 other types of risk in software products. Why are they important to consider?

Two other risks that are apparent in software products are security and reliability risks. 

Security vulnerabilities can lead to issues such as data breaches, unauthorized access or identity theft, as well as collateral damages, whether it be financial losses or reputational damage. This is considered a risk and is important to consider as it creates an opportunity for malicious users to exploit weaknesses in software systems, which can have a range of detrimental consequences. Examples include operational disruptions, intellectual property theft, ransomware attacks, etc.

As for reliability, it is mostly concerned with when software fails to function consistently, such as having frequent downtimes. This can affect the user’s experience, leading to a loss of productivity or customer dissatisfaction. Both of these can lead to potential revenue loss. This is classified as a risk and is important to consider because unreliable software can lead to negative consequences, which affect not only the users but also the organization that provides the software. The damages can be both monetary and non-monetary, such as losing user trust/loyalty, reputational damage, and associated compliance and legal risks.
\end{enumerate}

\end{document}